{% extends "googlebenchmark.jinja" %}
{% block includes %}
{{ super() }}

#include <algorithm>
#include <execution>
#include <numeric>
#include <iostream>
#include <random>
{% endblock %}

{% block benhcmark_function %}
{{ super () }}
  {% block setup %}
  size_t size__ = 0;
  std::cin >> size__;
  {{ container }}<{{ type }}> input_container__(size__);
  {{ container }}<{{ type }}> output_container__(size__);
  {% endblock %}

  {% if input == random %}
    std::random_device rd;
    std::mt19937 gen(rd());
    std::uniform_int_distribution<> dist(1, 100);
    std::generate(input_container__.begin(), input_container__.end(), [&](){return dist(gen);});
  {% endif %}
  {% block benchmark %}
    {% set call = "std::" ~ name ~ "(std::execution::" ~ policy ~ "," ~ signature %}
    {% if return_val == "true" %} 
      auto result = {{ call }}
      benchmark::DoNotOptimize(result);
    {% else %}
      benchmark::DoNotOptimize(input_container__);
      benchmark::DoNotOptimize(output_container__);
    {% endif %}
  {% endblock %}

{% endblock %}
